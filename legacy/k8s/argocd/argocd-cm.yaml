apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-cm
  namespace: argocd
  labels:
    app.kubernetes.io/name: argocd-cm
    app.kubernetes.io/part-of: argocd
data:
  # Repository URL
  repositories: |
    - url: https://github.com/IT21182914/WSO2-Final-Project-Inventory-Stock-Management-Microservices-System.git
      name: inventory-system
      type: git
  
  # Enable anonymous read access (optional, remove for production)
  # accounts.anonymous: "apiKey, login"
  
  # Resource customizations
  resource.customizations: |
    networking.k8s.io/Ingress:
      health.lua: |
        hs = {}
        hs.status = "Healthy"
        return hs
  
  # Application controller configuration
  application.instanceLabelKey: argocd.argoproj.io/instance
  
  # Server configuration
  url: https://argocd.yourdomain.com  # Update with your domain
  
  # Dex configuration (SSO)
  dex.config: |
    connectors:
      # GitHub OAuth (optional)
      # - type: github
      #   id: github
      #   name: GitHub
      #   config:
      #     clientID: $github-client-id
      #     clientSecret: $github-client-secret
      #     orgs:
      #     - name: your-org
  
  # Resource exclusions
  resource.exclusions: |
    - apiGroups:
      - cilium.io
      kinds:
      - CiliumIdentity
      clusters:
      - "*"

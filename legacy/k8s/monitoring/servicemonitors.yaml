# ServiceMonitors for Inventory System Microservices
# Note: User authentication is handled by Asgardeo - no user-service to monitor

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: inventory-service
  namespace: monitoring
  labels:
    team: inventory-system
spec:
  selector:
    matchLabels:
      app: inventory-service
  namespaceSelector:
    matchNames:
    - inventory-system
  endpoints:
  - port: http
    interval: 30s
    path: /metrics

---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: order-service
  namespace: monitoring
  labels:
    team: inventory-system
spec:
  selector:
    matchLabels:
      app: order-service
  namespaceSelector:
    matchNames:
    - inventory-system
  endpoints:
  - port: http
    interval: 30s
    path: /metrics

---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: product-catalog-service
  namespace: monitoring
  labels:
    team: inventory-system
spec:
  selector:
    matchLabels:
      app: product-catalog-service
  namespaceSelector:
    matchNames:
    - inventory-system
  endpoints:
  - port: http
    interval: 30s
    path: /metrics

---
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: supplier-service
  namespace: monitoring
  labels:
    team: inventory-system
spec:
  selector:
    matchLabels:
      app: supplier-service
  namespaceSelector:
    matchNames:
    - inventory-system
  endpoints:
  - port: http
    interval: 30s
    path: /metrics

---
# ServiceMonitor for Kong API Gateway
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: kong-gateway
  namespace: monitoring
  labels:
    team: inventory-system
spec:
  selector:
    matchLabels:
      app: kong
  namespaceSelector:
    matchNames:
    - kong-gateway
  endpoints:
  - port: metrics
    interval: 30s
    path: /metrics
